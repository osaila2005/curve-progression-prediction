<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Predicition of Final Cobb Angle</title>
<style>table, th, td {
        border: 1px solid black;
        border-collapse: collapse;
        }
</style>
</head>
<body>

	<h1>Prediction of Final Cobb Angle</h1>
     <!-- Main Input For Receiving Query to our ML -->
    <form id="form" action="{{ url_for('predict')}}" method="post" onsubmit="submitForm(event)">
    <p id="p0"></p>
        <span style="font-weight:bold;text-decoration:underline;">Please refer to the Features Description section below for more details</span>
<br>
    Initial cobb angle
    <input id="1" type="text" name="Cobb_Initial" required="required" />
    <br>
    Flexibility
    <input id="2" type="text" name="Flexibility" required="required" />
    <br>
    Lordosis
    <input id="3" type="text" name="Lordosis" required="required" />
    <br>
    Kyphosis
    <input id="4" type="text" name="Kyphosis" required="required" />
    <br>
    Age at predicition
    <input id="5" type="text" name="Age_last" required="required" />
    <br>
    Num_Levels_Involved
    <input type="text" name="Num_Levels_Involved" required="required" />
    <br>
    Risser_First_TP
    <input type="text" name="Risser_First_TP" required="required" />
    <br>
    <br>

    <button type="button" onclick="f1();f2();f3();f4();f5();submitForm(event)" class="btn btn-primary btn-block btn-large">Predict</button>  
    <!--<button type="button" style="background-color: green;color: aliceblue" onclick="f1();f2();f3();f4();f5();f0();reset()">Predict</button>-->
    <input type="reset" value="Reset" style="background-color: crimson;color: aliceblue"/>
    <p id="p1"></p>
    <p id="p2"></p>
    <p id="p3"></p>
    <p id="p4"></p>
    <p id="p5"></p>
    {{ prediction_text }}
<script type="text/javascript">

var e1=0;
var e2=0;
var e3=0;
var e4=0;
var e5=0;

function f1() {
  const message = document.getElementById("p1");
  message.innerHTML = "";
  let x = document.getElementById("1").value;
  try { 
    if(x == "")  throw "empty";
    if(isNaN(x)) throw "not a number";
    x = Number(x);
    if(x < 10.99)  throw "too low";
    if(x > 99.5)   throw "too high";
  }
  catch(err) {
    e1=1
    message.innerHTML = "Initial Cobb angle is " + err;
    return e1
  }
}
function f2() {
  const message = document.getElementById("p2");
  message.innerHTML = "";
  let x = document.getElementById("2").value;
  try { 
    if(x == "")  throw "empty";
    if(isNaN(x)) throw "not a number";
    x = Number(x);
    if(x < 0.05)  throw "too low";
    if(x > 0.99)   throw "too high";
  }
  catch(err) {
    e2=1
    message.innerHTML = "Flexibility (%) is  " + err;
    return e2
  }
}

function f3() {
  const message = document.getElementById("p3");
  message.innerHTML = "";
  let x = document.getElementById("3").value;
  try { 
    if(x == "")  throw "empty";
    if(isNaN(x)) throw "not a number";
    x = Number(x);
    if(x < 3.4)  throw "too low";
    if(x > 87.1)   throw "too high";
  }
  catch(err) {
    e3=1
    message.innerHTML = "Lumbar lordosis angle (L1-L5) is " + err;
  }
}

function f4() {
  const message = document.getElementById("p4");
  message.innerHTML = "";
  let x = document.getElementById("4").value;
  try { 
    if(x == "")  throw "empty";
    if(isNaN(x)) throw "not a number";
    x = Number(x);
    if(x < 0)  throw "too low";
    if(x > 51.3)   throw "too high";
  }
  catch(err) {
    e4=1
    message.innerHTML = "Thoracic kyphosis angle (T2-T12) is " + err;
  }
}

function f5() {
  const message = document.getElementById("p5");
  message.innerHTML = "";
  let x = document.getElementById("5").value;
  try { 
    if(x == "")  throw "empty";
    if(isNaN(x)) throw "not a number";
    x = Number(x);
    if(x < 10.4)  throw "too low";
    if(x > 18.6)   throw "too high";
  }
  catch(err) {
    e5=1
    message.innerHTML = "Age at predicition (years) is " + err;
  }
}
function submitForm(event){
  if(e1 == 1 || e2 == 1 || e3 == 1 || e4 == 1 || e5 == 1)
  {
  event.preventDefault();
  window.location.reload();
  }
  else{
    document.getElementById("form").submit();
  }
}

/*/function f0(event) {
   //const message = document.getElementById("p0");
   //message.innerHTML = "";
    if (e1 == 1 || e2 == 1 || e3 == 1 || e4 == 1 || e5 == 1)
   {
    return true;
    
   }
   else{
    document.getElementById("form").submit();
    returnToPreviousPage();
    return false
   }
} /*/



</script>

</form>
    <br>
    <!--{{ prediction_text }}-->
    <br>
</body>
</html>